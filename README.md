# Atom Game

双人回合制原子对战游戏。规则见 [RULES.md](RULES.md)，开发计划见 [PLAN.md](PLAN.md)。

## 环境

- Python 3.10+（或 3.9+）
- 依赖：`pip install -r requirements.txt`

## 运行

```bash
cd e:\atom_game
python main.py
```

关闭窗口或按 **ESC** 退出。

## 测试

```bash
python -m pytest tests/ -v
```

## 操作说明（纯鼠标 + 拖动，无快捷键）

- **阶段 0（确认场上状态）**  
  点击屏幕中央三个按钮之一：**多抽原子** / **多放置** / **多进攻**（对应本回合多抽 5+x、多放 4+x、多攻 x 次，x = 己方非空格子数）。

- **阶段 2（排布）**  
  - **拖动原子**：从己方**原子池**（当前玩家场地上方或下方的黑/红/蓝/绿块）**拖动**一个原子到己方三个格子中的格点，松开鼠标完成放置。同一格内原子须连通且至少有一个黑原子。  
  - 点击 **结束排布** 按钮进入阶段 3。

- **阶段 3（动作）**  
  - **进攻**：点击己方一个非空格子（会高亮）→ 再点击对方一个非空格子；若对方三格全空，点击对方区域则直接对玩家造成伤害。若攻击力 > 防御力，再点击对方格中要破坏的一个黑原子；若出现多个连通区域，再点击要**保留**的区域中任意格点。  
  - **发动效果**：点击己方一个**红/蓝/绿**原子。蓝、绿立即结算；红需再点击对方场上 y 个原子作为破坏目标。  
  - 点击 **结束回合** 结束本回合；若在选格/选原子等子状态，可点击 **取消** 回到空闲。  

- **先手第一回合**不能发动进攻。

- 将对方生命值降至 0 即获胜。结束界面可点击 **再来一局** 或 **退出**。

- **规则**：点击右下角 **规则** 按钮打开/关闭规则摘要；在 overlay 上点击 **关闭** 按钮也可关闭。  
- **ESC**：仅用于关闭规则 overlay 或退出游戏。  
- **音效**（可选）：在 `assets/sounds/` 下放入 `place.ogg`、`attack.ogg`、`effect.ogg`、`turn.ogg` 后会自动播放。
