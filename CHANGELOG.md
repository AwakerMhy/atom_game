# Changelog

## [1.1.0] - 2026-02-19

### 新增 / 改动

- 网格规模：每格为 41×41 背板，可放置区域限定为**大正六边形**（半径 18 环），仅六边形内可放原子。
- 三角形边长固定为格子边长的 1/4；视窗 14×14，初始居中于六边形。
- 格子外遮蔽：六边形外区域用边框色填充，网格与背景仅在六边形内显示。
- 移除「拖动视角」逻辑与按钮，简化交互。

### 修复

- 拖动原子到格点松手无法放置：`screen_to_grid` 对越界 (r,c) 做钳位，保证格内松手总能得到有效格点。

---

## [1.0.0] - 2025-02-19

### 新增 / 改动

- 双人回合制原子对战：3 格场地、黑/红/蓝/绿原子、阶段 0（选效果）/2（排布）/3（动作）。
- 界面：双方场地居中；每格带边框与米色背景；原子缩小显示；拖动原子时无外框幽灵。
- 排布阶段：本回合新放原子高亮；支持「撤回」按钮，确定布置前可撤销。
- 动作阶段：进攻与红/蓝/绿效果点击交互完整（选黑原子破坏、额外破坏、选连通区域、红效果选目标）。
- 绿原子回血：血量满时也可继续加血。
- 音效：放置、进攻、效果、回合结束、点击、撤回等事件均有音效；无 ogg 时使用程序合成（需 numpy）。
- 拖动视角：每格支持「拖动视角」模式，在格内拖动可平移网格显示。
- HUD：血条与原子数量图形面板（当前玩家高亮）。

### 修复

- 阶段 3 点击格子未响应：用 consumed 标志区分按钮与格子点击，保证进攻/效果交互生效。
- 进攻时「点击破坏黑原子」未响应：将 attack_choose_black 分支从 attack_choose_extra 内移出为同级 elif。
